extends  ../layouts/default.pug
include ../mixins/pagination.mixin.pug
include ../mixins/form.change.multi.mixin.pug
include ../mixins/filter.status.mixin.pug
include ../mixins/form.search.mixin.pug
include ../mixins/alert.mixin.pug


block main

  +alert-success()
  h1(class="mb-4") Danh sách sản phẩm
    .card.mb-3
      .card-header Bộ lọc và Tìm kiếm
      .card-body
        .row
          .col-6
            +filter-status(filterStatus)
          .col-6
            +form-search(keyword)        
  
  
  table(
    class = "table table-hover table-sm"
    multi-check-table
    )
    .card.mb-3
      .card-header Danh sách
      .card-body
            .row 
              .col-8
                +form-change-multi(`/admin/products/change-multi-status?_method=PATCH`)
              .col-4
                a(
                  href=`/admin/products/create`
                  class = "btn btn-outline-success"
                ) + Create

    thead

      tr
        th 
          input(
          type="checkbox"
          name = "checkbox-all"
          )
        th STT
        th Hình ảnh
        th Tiêu đề
        th Giá
        th Vị trí
        th Trạng thái
        th Hành động
    tbody
      each items, index in products
        tr 
          td
            input(
            type="checkbox"
            name = "check-box-data"
            value = items.id
            )
          td #{index + 1}
          td
            img(
              src=`${items.thumbnail}`
              alt=`${items.title}`
              width="100px"
              height="auto"
            )
          td #{items.title}
          td #{items.price}$
          td 
            input(
              type="number"
              style = "width : 100px"
              name = "position"
              value = `${items.position}`
              min = "1"
            )
          td
            - if(items.status == "active")
                a(
                  class="badge badge-success"
                  data-id = items.id 
                  data-change-status = "inactive"
                  ) Hoạt động 
            - else 
                a(
                  class="badge badge-danger"
                  data-id = items.id 
                  data-change-status = "active"
                  ) Dừng hoạt động 
          td
            button(class="btn btn-warning btn-sm") Sửa
            button(
              class="btn btn-danger btn-sm ml-1"
              button-delete-status
              data-id = items.id
              ) Xóa
  +pagination(objectPagination)
  form(action=""
  method="POST"
  path=`/admin/products/change-status`
  form-change-status
  ) 
  form(action=""
  method="POST"
  path=`/admin/products/delete-status`
  form-delete-status
  )
  