extends  ../layouts/default.pug
include ../mixins/pagination.mixins.pug
block main
  h1(class="mb-4") Danh sách sản phẩm
    .card.mb-3
      .card-header Bộ lọc và Tìm kiếm
      .card-body
        .row
          .col-6
            each item in filterStatus
              button(
                class=`btn btn-sm ml-1 btn-outline-success ${item.class}` 
                button-status=item.status
              ) #{item.name}
          .col-6
            form(id="form-search")
              .input-group
                input(
                  type="text"
                  placeholder="Nhập từ khóa"
                  name="keyword"
                  class="form-control"
                  value = name
                )
                .input-group-append
                  button(
                    class="btn btn-success"
                    type="submit"
                    button-form-search
                  ) Tìm
        
  
  table(
    class = "table table-hover table-sm"
    multi-check-table
    )
    form(
          action = "/admin/products/change-multi-status?_method=PATCH" 
          method = "POST"
          form-change-multi
        )
          .d-flex.align-item-start 
            .form-group 
              select(name="type" class = "form-control")
                option(value = "active") Hoạt động
                option(value = "inactive") Dừng hoạt động
                option(value = "delete-all") Xóa sản phẩm 
                option(value = "change-position") Thay đổi vị trí
            .form-group 
              input(
                type = "text"
                name = "ids"
                value = ""
                class = "form-control d-none"
              )
            button(type = "submit" class = "btn btn-primary") Áp dụng
    thead

      tr
        th 
          input(
          type="checkbox"
          name = "checkbox-all"
          )
        th STT
        th Hình ảnh
        th Tiêu đề
        th Giá
        th Vị trí
        th Trạng thái
        th Hành động
    tbody
      each items, index in products
        tr 
          td
            input(
            type="checkbox"
            name = "check-box-data"
            value = items.id
            )
          td #{index + 1}
          td
            img(
              src=`${items.thumbnail}`
              alt=`${items.title}`
              width="100px"
              height="auto"
            )
          td #{items.title}
          td #{items.price}$
          td 
            input(
              type="number"
              style = "width : 100px"
              name = "position"
              value = `${items.position}`
              min = "1"
            )
          td
            - if(items.status == "active")
                a(
                  class="badge badge-success"
                  data-id = items.id 
                  data-change-status = "inactive"
                  ) Hoạt động 
            - else 
                a(
                  class="badge badge-danger"
                  data-id = items.id 
                  data-change-status = "active"
                  ) Dừng hoạt động 
          td
            button(class="btn btn-warning btn-sm") Sửa
            button(
              class="btn btn-danger btn-sm ml-1"
              button-delete-status
              data-id = items.id
              ) Xóa
  +pagination(objectPagination)
  form(action=""
  method="POST"
  path=`/admin/products/change-status`
  form-change-status
  ) 
  form(action=""
  method="POST"
  path=`/admin/products/delete-status`
  form-delete-status
  )
  